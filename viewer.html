<!doctype html>
<html lang="pl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>Cravers — podgląd</title>
  <style>
    html, body {
      margin: 0;
      padding: 0;
      height: 100%;
      background: #020617;
    }
    #frame {
      border: 0;
      width: 100%;
      height: 100%;
      display: block;
      background: #020617;
    }
  </style>
</head>
<body>
  <iframe id="frame" referrerpolicy="no-referrer"></iframe>
  <script>
    const u = new URL(location.href);
    const encodedSrc = u.searchParams.get('src') || ''; // Pobieramy zakodowany URL
    const mode = u.searchParams.get('mode') || 'open';

    const frame = document.getElementById('frame');
    
    if (encodedSrc) {
        // Dekodujemy URL
        const src = decodeURIComponent(encodedSrc);

        // Jeśli to Formularz, upewniamy się, że ma embedded=true
        let finalSrc = src;
        if (finalSrc.includes('docs.google.com/forms') && !finalSrc.includes('embedded=true')) {
            finalSrc += (finalSrc.includes('?') ? '&' : '?') + 'embedded=true';
        }
        
        frame.src = finalSrc;
    }
    
    // Usunięto logikę drukowania, ponieważ jest teraz obsługiwana bezpośrednio w index.html
    // poprzez window.open(link_do_druku)

    // Opcjonalnie: Przycisk powrotu w viewer.html (jeśli chcesz go później dodać, możesz użyć:
    // <a href="#" onclick="window.history.back();" class="back-button">← Powrót</a>
  </script>
</body>
</html>
